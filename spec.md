Build an interactive web app to help users understand the basics of Feng Shui based on the Bagua model, and how Qimen Dunjia (a type of Chinese divination) can be integrated into it.

SPECIFICATIONS:

**Purpose:** To build an interactive web app helping users understand the basics of Feng Shui based on the 后天八卦 (Houtian Ba Gua) / 九宫格 (Jiu Gong Ge) model, the fundamentals of 五行 (Wu Xing), and how 奇门遁甲 (Qimen Dunjia) Eight Gates (八门) can be conceptually integrated. This app serves as a foundational learning tool for the "水到奇成" course.

**General Requirements:**

1.  The app should be a single, self-contained HTML document using only inline HTML, CSS, and JavaScript. No external libraries are allowed.
2.  The visual style must be clean, easily readable, and fully responsive, functioning properly on both desktop and mobile devices.
3.  A clear title "后天八卦 (Houtian Ba Gua) / 九宫格 (Jiu Gong Ge) Foundations" should be displayed above the main grid.

**Detailed Specifications:**

1.  **Central Element: The Ba Gua Grid**
    *   The app will present a 3x3 grid. This grid is the central interactive element.
    *   The center cell of the grid will remain visually distinct (e.g., slightly different background) but will not be clickable for detailed information in the Ba Gua-only mode. It can be labeled "中宫 (Zhong Gong - Central Palace)".

2.  **Ba Gua Mode (Default View):**
    *   Each of the 8 outer cells in the grid should be clearly labeled with:
        *   Its corresponding **Trigram Symbol** (e.g., ☰, ☵, ☶, ☳, ☴, ☲, ☷, ☱).
        *   Its **Trigram Name** (乾 Qian, 坎 Kan, 艮 Gen, 震 Zhen, 巽 Xun, 离 Li, 坤 Kun, 兑 Dui).
        *   Its associated **Direction** (西北 Northwest, 北 North, 东北 Northeast, 东 East, 东南 Southeast, 南 South, 西南 Southwest, 西 West).
    *   A subtle background color tint representing the cell's primary Element can be applied to each of the 8 outer cells (e.g., light blue for Water, light green for Wood).

3.  **Interactivity in Ba Gua Mode:**
    *   Users must be able to click on each of the 8 outer cells.
    *   Upon clicking a cell, a designated information panel (e.g., a modal popup or a dedicated section on the page) should appear, displaying the following attributes for the selected cell:
        *   **Trigram Symbol** and **Trigram Name**.
        *   **Direction** When showing the direction, it should already hint at the 24 Mountains as specified: e.g., "Direction: 北 North (conceptually encompassing the 壬 Ren, 子 Zi, 癸 Gui mountains used for precise orientation)."
        *   **Element** associated with that trigram (水 Water, 土 Earth, 木 Wood, 火 Fire, 金 Metal).
        *   A short sentence describing the **general qualities or aspects of life** that trigram represents (e.g., "乾 (Qian) represents Heaven, strength, and leadership.", "坎 (Kan) represents Water, challenges, and introspection.").
        *   A concise description of what that **Element in that position can enhance** (e.g., "The Water element in the North can enhance career flow and wisdom.").
        *   **五行 (Wu Xing) Interactions:**
            *   "Generates: [Element it generates] (e.g., Water generates Wood)"
            *   "Controls: [Element it controls] (e.g., Water controls Fire)"
            *   "Is Generated By: [Element that generates it] (e.g., Water is generated by Metal)"
            *   "Is Controlled By: [Element that controls it] (e.g., Water is controlled by Earth)"

4.  **Qimen Dunjia Overlay Mode:**
    *   A clearly visible button labeled "Overlay Qimen Dunjia Gates (八门)" must be present.
    *   When this button is clicked (toggled on):
        *   A new set of labels representing the **Eight Gates (八门)** (开 Kai, 休 Xiu, 生 Sheng, 伤 Shang, 杜 Du, 景 Jing, 死 Si, 惊 Jing) should appear prominently on each of the 8 outer cells, *in addition* to the existing Ba Gua labels (Trigram Symbol, Name, Direction).
        *   Each cell will be labeled with the specific Gate that **originates** from (corresponds to) its Ba Gua location.
        *   The Central Palace ("中宫") cell, when the Qimen overlay is active, should display a simple, generic star symbol (e.g., ★ or ☆) without further interactive detail, representing the conceptual presence of a "star" in Qimen charts.
    *   The button should act as a toggle (e.g., text changes to "Remove Qimen Overlay" or its state is visually indicated).

5.  **Interactivity in Qimen Dunjia Overlay Mode:**
    *   When the "Overlay Qimen Dunjia Gates" mode is active, clicking on each of the 8 outer cells should update the information panel to display:
        *   **All information from Ba Gua Mode (Spec 3)** for context.
        *   **AND additional Qimen Gate Information:**
            *   **Gate Name** (e.g., "开门 (Kai Men) - Open Gate").
            *   **Original Palace & Derived Element:** "Originates from [Original Ba Gua Palace Name, e.g., 乾 (Qian) Palace]. Derived Elemental Nature: [Gate's Element, e.g., 金 (Metal)]."
            *   A sentence describing the **general properties of the Gate** (e.g., "The Open Gate (开门) is generally auspicious for new beginnings, career, and ventures.").
            *   **Conceptual Interaction Explanation (Setting Stage for Course):**
                *   "In this foundational view, the [Gate Name] is shown in its home palace, the [Palace Name]. Here, its elemental nature ([Gate's Element]) is aligned with the palace's element ([Palace's Element]), representing its most fundamental state."
                *   "The '水到奇成' course will teach how this Gate's energy dynamically changes and interacts when it moves to *other* palaces in a time-specific Qimen Dunjia chart. Unfavorable interactions or specific negative conditions (known as '四害 - Si Hai' or 'problem indicators') in those dynamic contexts are key to advanced analysis and will be covered in the course."

6.  **Static Informational Sections (Accessible, e.g., via links/buttons or as collapsible sections):**
    *   **A. "About 五行 (Wu Xing - The Five Elements)":**
        *   A clear, concise explanation of the Five Elements.
        *   Visual diagrams illustrating:
            *   The **Generating Cycle (相生 Xiangsheng)** with brief descriptions (e.g., "Wood feeds Fire...").
            *   The **Controlling Cycle (相克 Xiangke)** with brief descriptions (e.g., "Fire melts Metal...").
    *   **B. "About Directions, 罗盘 (Luopan), & 二十四山 (24 Mountains)":**
        *   Explanation: "The Ba Gua provides 8 main directions (each 45 degrees). For greater precision in Feng Shui analysis, especially in the '水到奇成' methodology, these are subdivided into the 24 Mountains (二十四山)."
        *   Explanation: "Each of the 8 Ba Gua directions (e.g., North) contains three 'Mountains' (e.g., North contains 壬 Ren, 子 Zi, 癸 Gui), each spanning approximately 15 degrees. This app allows you to explore these Mountains visually."
        *   Explanation: "A specialized Feng Shui compass called a Luopan (罗盘) is essential for accurately determining which of these 24 Mountains a building faces (向 Xiang) or sits on (坐 Zuo)."
        *   Explanation: "Understanding the precise Mountain is fundamental in the '水到奇成' course before overlaying a dynamic Qimen Dunjia chart for analysis and remedy."
    *   **C. "About this App & Next Steps":**
        *   Briefly explain that this app covers foundational concepts for the "水到奇成" course.
        *   Mention that the course will expand on these by teaching how to interpret dynamic Qimen charts, identify "四害" (problem indicators), and apply this knowledge practically using the 24 Mountains.


7.  **Feng Shui 二十四山 (24 Mountains) Overlay Mode**
    *   **7.1. Activation Button:**
        *   A clearly visible, separate button labeled "Overlay 24 Mountains (二十四山)" must be present.
        *   This button should act as a toggle. When clicked (toggled on), the 24 Mountains overlay is applied. When clicked again (toggled off), it's removed.
        *   This overlay can be active **independently** of the "Qimen Dunjia Gates" overlay or **in conjunction** with it.

    *   **7.2. Visual Representation on the Grid (When 24 Mountains Overlay is Active):**
        *   Each of the 8 outer Ba Gua cells will be **visually subdivided into three distinct, equal segments** (e.g., three horizontal strips or three vertical columns within the bounds of the original Ba Gua cell).
        *   Each of these 24 segments will be clearly labeled with its **specific Mountain Name**. The names are:
            *   **坎 (Kan) / North:** 壬 (Ren), 子 (Zi), 癸 (Gui)
            *   **艮 (Gen) / Northeast:** 丑 (Chou), 艮 (Gen), 寅 (Yin)
            *   **震 (Zhen) / East:** 甲 (Jia), 卯 (Mao), 乙 (Yi)
            *   **巽 (Xun) / Southeast:** 辰 (Chen), 巽 (Xun), 巳 (Si)
            *   **离 (Li) / South:** 丙 (Bing), 午 (Wu), 丁 (Ding)
            *   **坤 (Kun) / Southwest:** 未 (Wei), 坤 (Kun), 申 (Shen)
            *   **兑 (Dui) / West:** 庚 (Geng), 酉 (You), 辛 (Xin)
            *   **乾 (Qian) / Northwest:** 戌 (Xu), 乾 (Qian), 亥 (Hai)
            *(Labels should be concise enough to fit, perhaps with full names on hover/click if space is an issue, but direct labeling is preferred).*
        *   The existing Ba Gua Trigram Symbol, Name, and Direction labels for the parent Ba Gua cell should remain visible, perhaps slightly repositioned or styled to accommodate the Mountain segments.
        *   The Central Palace ("中宫") is not subdivided for the 24 Mountains.

    *   **7.3. Interactivity with 24 Mountains Overlay Active:**
        *   Users must be able to click on each of the **24 individual Mountain segments**.
        *   Clicking on a Ba Gua cell's general area (if not directly on a Mountain segment, though clicking segments should be prioritized) would ideally show the parent Ba Gua cell's info as per Spec 3 (and Spec 5 if Qimen overlay is also active).
        *   Upon clicking a **specific Mountain segment**, the designated information panel should appear/update, displaying the following attributes for the **selected Mountain**:
            *   **A. Mountain Name:** (e.g., "子 (Zi) Mountain").
            *   **B. Parent Ba Gua Palace:** "Belongs to: 坎 (Kan) Palace - 北 (North) Direction."
            *   **C. Approximate Degree Range:** (e.g., "Approx. Degrees: 352.5° - 7.5°"). *This range data will need to be pre-defined for all 24 Mountains.*
            *   **D. Element (Inherited):** "Primary Element: 水 (Water) - inherited from the 坎 (Kan) Palace. The '水到奇成' course will clarify if specific Mountain nuances apply." *This manages expectations about deeper elemental systems not covered foundationally.*
            *   **E. Brief Feng Shui Implication/Use:** A very short, high-level sentence (e.g., "子 (Zi) Mountain: Represents the peak of Water energy, often associated with midnight, wisdom, and the direct North. Precise for determining house facing or sitting for specific Feng Shui audits.").
            *   **F. Relevance to "水到奇成" Course:** "In the '水到奇成' course, accurately identifying the Facing or Sitting Mountain (e.g., Tử Mountain) of a property using a Luopan (罗盘) is a critical first step. This precise directional data is then used as the basis for overlaying and interpreting the Qimen Dunjia chart for that specific location and time."

    *   **7.4. Combined Overlay Interactivity (24 Mountains + Qimen Dunjia Gates Active):**
        *   If both the "Overlay 24 Mountains" and "Overlay Qimen Dunjia Gates" modes are active, clicking on a **specific Mountain segment** should ideally show a comprehensive view in the information panel:
            *   **All information for the selected Mountain (Spec 7.3 A-F).**
            *   **PLUS, the Qimen Gate information for the parent Ba Gua Palace:**
                *   "Qimen Gate in this Sector: [Gate Name, e.g., 休门 (Xiu Men) - Rest Gate] (as it currently occupies the [Parent Ba Gua Palace Name, e.g., 坎 (Kan) Palace])."
                *   The Gate's properties and conceptual interaction as per Spec 5.
            *   *(This allows the user to conceptually see: "My house faces Zi Mountain, which is in the Kan Palace. In this Qimen chart (conceptualized by home palace gates here), the Xiu Men is in Kan. How does this all relate?").*
        *   The goal is to help the user begin to associate a precise Mountain direction with the broader Qimen Gate energy occupying that sector.


The app must be fully responsive and function properly on both desktop and mobile and it supports Chinese (default) and English. Provide the code as a single, self-contained HTML document. All styles and scripts must be inline. In the result, encase the code between "```" and "```" for easy parsing.